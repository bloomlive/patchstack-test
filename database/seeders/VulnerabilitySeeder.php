<?php

namespace Database\Seeders;

use App\Models\Vulnerability;
use App\Models\VulnerabilityFactor;
use App\Models\VulnerabilityFactorType;
use Illuminate\Database\Seeder;

class VulnerabilitySeeder extends Seeder
{
    public function run()
    {
        Vulnerability::factory()
            ->count(24)
            ->create()
            ->each(function (Vulnerability $vulnerability) {
                VulnerabilityFactorType::all()
                    ->each(function (VulnerabilityFactorType $type) use ($vulnerability) {
                        VulnerabilityFactor::factory()
                            ->for($type)
                            ->for($vulnerability)
                            ->create();
                    });
            });
    }
}
